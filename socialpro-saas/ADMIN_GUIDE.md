# دليل نظام Admin - SocialPro

## الوصول لنظام Admin

### تسجيل الدخول كمسؤول
1. قم بتسجيل الدخول إلى المنصة
2. سيتم منحك دور "admin" تلقائياً إذا كنت أول مستخدم
3. ستظهر لك زر "لوحة الإدارة" في القائمة الجانبية

## صفحات Admin المتاحة

### 1. لوحة التحكم الرئيسية (/admin)
**الميزات:**
- 5 بطاقات إحصائية:
  - إجمالي المستخدمين
  - المستخدمين النشطين (آخر 30 يوم)
  - الاشتراكات المدفوعة
  - إجمالي النقاط في النظام
  - إجمالي الحملات
- رسم بياني لنمو المستخدمين (آخر 7 أيام)
- قائمة بآخر 5 مستخدمين مسجلين
- روابط سريعة للصفحات الأخرى

### 2. إدارة المستخدمين (/admin/users)
**الميزات:**
- جدول شامل لجميع المستخدمين مع:
  - الاسم والبريد الإلكتروني
  - الشركة والهاتف
  - الدور (Admin/User)
  - النقاط
  - الحالة
  - تاريخ التسجيل
- بحث بالاسم أو البريد
- فلترة حسب الدور
- Pagination (20 مستخدم/صفحة)
- **إجراءات متاحة:**
  - تعديل النقاط
  - تغيير الدور (user ↔ admin)
  - حذف المستخدم

### 3. الإحصائيات المتقدمة (/admin/stats)
**الميزات:**
- رسم بياني لنمو المستخدمين (آخر 30 يوم)
- رسم بياني دائري لتوزيع الاشتراكات
- رسم بياني شريطي لاستخدام المنصات
- قائمة بأكثر 10 مستخدمين نشاطاً (حسب النقاط)
- إحصائيات النقاط:
  - إجمالي النقاط الممنوحة
  - متوسط النقاط لكل مستخدم
  - أعلى رصيد نقاط

### 4. إدارة الاشتراكات (/admin/subscriptions)
**الميزات:**
- 3 بطاقات إحصائية:
  - إجمالي الاشتراكات
  - الاشتراكات النشطة
  - الإيرادات المتوقعة
- جدول شامل للاشتراكات:
  - اسم المستخدم
  - الخطة (مجاني، شهري، سنوي، مدى الحياة)
  - الحالة (نشط، منتهي، ملغي)
  - تاريخ البدء والانتهاء
  - التجديد التلقائي
- فلترة حسب الحالة والخطة
- **إجراءات متاحة:**
  - تجديد الاشتراك
  - إلغاء الاشتراك

### 5. إدارة المنصات (/admin/platforms)
**الميزات:**
- عرض جميع المنصات الـ 12:
  - WhatsApp، Facebook، Instagram، Twitter/X
  - Telegram، LinkedIn، TikTok، Pinterest
  - Reddit، Snapchat، X Plus، Telegram Premium
- لكل منصة:
  - الأيقونة والاسم
  - الحالة (نشط/معطل)
  - عدد المستخدمين المرتبطين
  - هل تحتاج اشتراك مميز
- **إجراءات متاحة:**
  - تفعيل/تعطيل المنصة
  - تعديل معلومات المنصة
- ملخص إحصائي:
  - إجمالي المنصات
  - المنصات النشطة
  - المنصات المعطلة
  - المنصات المميزة

### 6. إعدادات المنصة (/admin/settings)
**الميزات:**
- اسم المنصة
- الحد الأقصى للحملات المجانية
- النقاط الافتراضية عند التسجيل
- وضع الصيانة (تفعيل/تعطيل)
- إشعارات البريد الإلكتروني
- إشعارات SMS

## الحماية والأمان

### آلية الحماية
- كل صفحة Admin محمية بفحص client-side
- التحقق من دور المستخدم (role === 'admin')
- إعادة التوجيه للـ Dashboard إذا لم يكن مسؤولاً
- إعادة التوجيه لصفحة Login إذا لم يكن مسجلاً

### الصلاحيات
- **Admin**: وصول كامل لجميع صفحات Admin
- **User**: وصول للـ Dashboard العادي فقط
- الدور يُحدد في جدول `profiles` (عمود `role`)

## قاعدة البيانات

### الجداول المستخدمة
- `profiles` - معلومات المستخدمين والدور
- `subscriptions` - الاشتراكات
- `campaigns` - الحملات
- `user_platforms` - ربط المستخدمين بالمنصات
- `admin_settings` - إعدادات المنصة العامة

### أول مستخدم = Admin
- يوجد Trigger في قاعدة البيانات
- أول مستخدم يسجل يُمنح دور "admin" تلقائياً
- باقي المستخدمين يُمنحون دور "user"

## التكنولوجيا المستخدمة

- **Frontend**: Next.js 14 + React + TypeScript
- **Styling**: Tailwind CSS
- **Charts**: Recharts
- **Icons**: Lucide React
- **Backend**: Supabase
- **Database**: PostgreSQL (via Supabase)

## الملاحظات الهامة

1. **البيانات الحالية**: معظم البيانات حالياً تجريبية (dummy data)
2. **الإحصائيات**: تُحسب بشكل فعلي من قاعدة البيانات
3. **التعديلات**: جميع عمليات التعديل تحفظ في Supabase
4. **الأداء**: استخدام Pagination للجداول الكبيرة
5. **RTL**: جميع الصفحات تدعم الاتجاه من اليمين لليسار

## الخطوات التالية الموصى بها

1. **ربط بيانات حقيقية**: تحديث الإحصائيات لتعكس البيانات الحقيقية
2. **إضافة Middleware**: لحماية صفحات Admin على مستوى السيرفر
3. **تحسين الأمان**: إضافة RLS policies أكثر صرامة
4. **إضافة ميزات**:
   - تصدير البيانات (CSV/Excel)
   - إرسال إشعارات للمستخدمين
   - سجل نشاطات Admin (Audit Log)
   - رسوم بيانية أكثر تفصيلاً
