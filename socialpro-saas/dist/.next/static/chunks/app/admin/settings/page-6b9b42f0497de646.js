(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[140],{8047:function(e,r,t){Promise.resolve().then(t.bind(t,60001))},28880:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});let a=(0,t(36438).Z)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},53659:function(e,r,t){"use strict";t.d(r,{Z:function(){return a}});let a=(0,t(36438).Z)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},99267:function(e,r,t){"use strict";var a=t(20326);t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}})},60001:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return o}});var a=t(48217),s=t(47327),n=t(72758),i=t(99267),l=t(53659),c=t(28880);function o(){let e=(0,i.useRouter)(),[r,t]=(0,s.useState)(!0),[o,d]=(0,s.useState)(!1),[u,f]=(0,s.useState)({platform_name:"SocialPro",max_free_campaigns:5,default_points:100,maintenance_mode:!1,email_notifications:!0,sms_notifications:!1});(0,s.useEffect)(()=>{m(),p()},[]);let m=async()=>{let{data:{user:r}}=await n.O.auth.getUser();if(!r){e.push("/login");return}let{data:t}=await n.O.from("profiles").select("role").eq("id",r.id).single();if((null==t?void 0:t.role)!=="admin"){e.push("/dashboard");return}},p=async()=>{try{let{data:e,error:r}=await n.O.from("admin_settings").select("*").single();if(r&&"PGRST116"!==r.code)throw r;e&&f(e)}catch(e){console.error("خطأ في تحميل الإعدادات:",e)}finally{t(!1)}},x=async()=>{d(!0);try{if(u.id){let{error:e}=await n.O.from("admin_settings").update(u).eq("id",u.id);if(e)throw e}else{let{error:e}=await n.O.from("admin_settings").insert([u]);if(e)throw e}alert("تم حفظ الإعدادات بنجاح"),p()}catch(e){console.error("خطأ في حفظ الإعدادات:",e),alert("حدث خطأ أثناء الحفظ")}finally{d(!1)}};return r?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[(0,a.jsx)(l.Z,{className:"w-8 h-8"}),"إعدادات المنصة"]}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"تكوين إعدادات النظام العامة"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"اسم المنصة"}),(0,a.jsx)("input",{type:"text",value:u.platform_name,onChange:e=>f({...u,platform_name:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحد الأقصى للحملات المجانية"}),(0,a.jsx)("input",{type:"number",value:u.max_free_campaigns,onChange:e=>f({...u,max_free_campaigns:parseInt(e.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"عدد الحملات المسموح بها للمستخدمين على الخطة المجانية"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"النقاط الافتراضية عند التسجيل"}),(0,a.jsx)("input",{type:"number",value:u.default_points,onChange:e=>f({...u,default_points:parseInt(e.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"عدد النقاط الممنوحة للمستخدمين الجدد تلقائياً"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"وضع الصيانة"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"عند التفعيل، لن يتمكن المستخدمون من الوصول للمنصة"})]}),(0,a.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:u.maintenance_mode,onChange:e=>f({...u,maintenance_mode:e.target.checked}),className:"sr-only peer"}),(0,a.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:right-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"إشعارات البريد الإلكتروني"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"إرسال رسائل بريد إلكتروني للمستخدمين"})]}),(0,a.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:u.email_notifications,onChange:e=>f({...u,email_notifications:e.target.checked}),className:"sr-only peer"}),(0,a.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:right-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"إشعارات SMS"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"إرسال رسائل نصية للمستخدمين"})]}),(0,a.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:u.sms_notifications,onChange:e=>f({...u,sms_notifications:e.target.checked}),className:"sr-only peer"}),(0,a.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:right-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]}),(0,a.jsx)("div",{className:"pt-4 border-t border-gray-200",children:(0,a.jsxs)("button",{onClick:x,disabled:o,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,a.jsx)(c.Z,{className:"w-5 h-5"}),o?"جاري الحفظ...":"حفظ الإعدادات"]})})]})]})})}},72758:function(e,r,t){"use strict";t.d(r,{O:function(){return a}});let a=(0,t(7645).eI)("https://gigrtzamstdyynmvwljq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZ3J0emFtc3RkeXlubXZ3bGpxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIwMDg5MDMsImV4cCI6MjA3NzU4NDkwM30.OZMTpBkAK2Zc4m0CyOdBbHsoAV_MS7FK-OpQNvuxgmc")}},function(e){e.O(0,[818,275,960,744],function(){return e(e.s=8047)}),_N_E=e.O()}]);