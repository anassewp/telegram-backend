(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[168],{52975:function(e,t,s){Promise.resolve().then(s.bind(s,40461))},40461:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var r=s(57437),a=s(2265),l=s(2141),c=s(99376),i=s(68919),n=s(79205);let d=(0,n.Z)("toggle-right",[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]]),x=(0,n.Z)("toggle-left",[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]]);var m=s(95805),o=s(15868),u=s(33145);function h(){let e=(0,c.useRouter)(),[t,s]=(0,a.useState)(!0),[n,h]=(0,a.useState)([]);(0,a.useEffect)(()=>{g(),p()},[]);let g=async()=>{let{data:{user:t}}=await l.O.auth.getUser();if(!t){e.push("/login");return}let{data:s}=await l.O.from("profiles").select("role").eq("id",t.id).single();if((null==s?void 0:s.role)!=="admin"){e.push("/dashboard");return}},p=async()=>{try{let e=await fetch("/data/platforms.json"),t=await e.json();if(t.platforms){let e=await Promise.all(t.platforms.map(async e=>{let{count:t}=await l.O.from("user_platforms").select("*",{count:"exact",head:!0}).eq("platform_id",e.id);return{...e,user_count:t||0}}));h(e)}}catch(e){console.error("خطأ في تحميل المنصات:",e)}finally{s(!1)}},f=async(e,t)=>{h(s=>s.map(s=>s.id===e?{...s,is_active:!t}:s)),alert("تم ".concat(t?"تعطيل":"تفعيل"," المنصة بنجاح"))};return t?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-2",children:[(0,r.jsx)(i.Z,{className:"w-8 h-8"}),"إدارة المنصات"]}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:"إدارة منصات التواصل الاجتماعي المتاحة"})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(e=>(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center",style:{backgroundColor:"".concat(e.color,"15")},children:(0,r.jsx)("div",{className:"relative w-8 h-8",children:(0,r.jsx)(u.default,{src:e.icon,alt:e.name,fill:!0,className:"object-contain"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-bold text-gray-900",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:e.name_en})]})]}),(0,r.jsx)("button",{onClick:()=>f(e.id,e.is_active),className:"flex items-center gap-2",children:e.is_active?(0,r.jsx)(d,{className:"w-8 h-8 text-green-500"}):(0,r.jsx)(x,{className:"w-8 h-8 text-gray-400"})})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:e.description}),(0,r.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,r.jsx)(m.Z,{className:"w-4 h-4"}),(0,r.jsxs)("span",{children:[e.user_count||0," مستخدم"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[e.is_active?(0,r.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:"نشط"}):(0,r.jsx)("span",{className:"px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-xs font-medium",children:"معطل"}),e.requires_premium&&(0,r.jsx)("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",children:"مميز"})]})]}),(0,r.jsx)("div",{className:"mt-4 flex gap-2",children:(0,r.jsxs)("button",{className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-primary/10 text-primary rounded-lg hover:bg-primary/20 transition-colors text-sm font-medium",children:[(0,r.jsx)(o.Z,{className:"w-4 h-4"}),"تعديل"]})})]},e.id))}),(0,r.jsxs)("div",{className:"mt-8 bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"ملخص المنصات"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,r.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"إجمالي المنصات"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:n.length})]}),(0,r.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"المنصات النشطة"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-green-600",children:n.filter(e=>e.is_active).length})]}),(0,r.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"المنصات المعطلة"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-600",children:n.filter(e=>!e.is_active).length})]}),(0,r.jsxs)("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"المنصات المميزة"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-purple-600",children:n.filter(e=>e.requires_premium).length})]})]})]})]})})}},2141:function(e,t,s){"use strict";s.d(t,{O:function(){return r}});let r=(0,s(71545).eI)("https://gigrtzamstdyynmvwljq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZ3J0emFtc3RkeXlubXZ3bGpxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIwMDg5MDMsImV4cCI6MjA3NzU4NDkwM30.OZMTpBkAK2Zc4m0CyOdBbHsoAV_MS7FK-OpQNvuxgmc")},68919:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]])},15868:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},95805:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(79205).Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},99376:function(e,t,s){"use strict";var r=s(35475);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},25523:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return r}});let r=s(47043)._(s(2265)).default.createContext(null)}},function(e){e.O(0,[963,145,971,117,744],function(){return e(e.s=52975)}),_N_E=e.O()}]);