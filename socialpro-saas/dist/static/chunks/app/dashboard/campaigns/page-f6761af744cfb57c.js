(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[305],{84042:function(e,t,s){Promise.resolve().then(s.bind(s,96478))},96478:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return y}});var a=s(57437),l=s(2265),r=s(2141),n=s(99397),c=s(58896),i=s(33276),d=s(89227),u=s(70525),x=s(73247),o=s(3577),m=s(91723),h=s(42208),p=s(95805),f=s(15868),j=s(18930),b=s(33145);function y(){let[e,t]=(0,l.useState)([]),[s,y]=(0,l.useState)([]),[g,N]=(0,l.useState)(!0),[v,w]=(0,l.useState)(""),[k,Z]=(0,l.useState)("all"),[M,C]=(0,l.useState)(!1),[I,_]=(0,l.useState)("");(0,l.useEffect)(()=>{O()},[]);let O=async()=>{let{data:{user:e}}=await r.O.auth.getUser();if(e){_(e.id);let{data:s}=await r.O.from("campaigns").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});s&&t(s);let a=await fetch("/data/platforms.json");y((await a.json()).platforms)}N(!1)},S=e=>s.find(t=>t.id===e),z=e=>{switch(e){case"active":return"bg-green-100 text-green-700";case"paused":return"bg-yellow-100 text-yellow-700";case"completed":return"bg-blue-100 text-blue-700";default:return"bg-neutral-100 text-neutral-700"}},D=e=>{switch(e){case"active":return"نشطة";case"paused":return"متوقفة";case"completed":return"مكتملة";case"draft":return"مسودة";default:return e}},J=async()=>{let s={user_id:I,name:"حملة جديدة",platform_id:"whatsapp",status:"draft",start_date:new Date().toISOString(),end_date:new Date(Date.now()+2592e6).toISOString(),budget:1e3,target_audience:{},settings:{}},{data:a,error:l}=await r.O.from("campaigns").insert(s).select().single();!l&&a&&(t([a,...e]),C(!1))},q=async(s,a)=>{let l="active"===a?"paused":"active",{error:n}=await r.O.from("campaigns").update({status:l}).eq("id",s);n||t(e.map(e=>e.id===s?{...e,status:l}:e))},A=async s=>{let{error:a}=await r.O.from("campaigns").delete().eq("id",s);a||t(e.filter(e=>e.id!==s))},E=e.filter(e=>{let t=e.name.toLowerCase().includes(v.toLowerCase()),s="all"===k||e.status===k;return t&&s}),L={total:e.length,active:e.filter(e=>"active"===e.status).length,paused:e.filter(e=>"paused"===e.status).length,completed:e.filter(e=>"completed"===e.status).length};return g?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 border-4 border-primary-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-neutral-600",children:"جاري تحميل الحملات..."})]})}):(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-neutral-900 mb-2",children:"الحملات التسويقية"}),(0,a.jsx)("p",{className:"text-neutral-600",children:"أنشئ وأدر حملاتك التسويقية عبر جميع المنصات"})]}),(0,a.jsxs)("button",{onClick:()=>C(!0),className:"px-6 py-3 bg-primary-600 text-white rounded-lg font-semibold btn-transition hover:bg-primary-700 flex items-center gap-2",children:[(0,a.jsx)(n.Z,{className:"w-5 h-5"}),"إنشاء حملة جديدة"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-xl border border-neutral-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-neutral-600 text-sm",children:"إجمالي الحملات"}),(0,a.jsx)(c.Z,{className:"w-5 h-5 text-primary-600"})]}),(0,a.jsx)("div",{className:"text-3xl font-bold text-neutral-900",children:L.total})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-xl border border-neutral-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-neutral-600 text-sm",children:"نشطة"}),(0,a.jsx)(i.Z,{className:"w-5 h-5 text-green-600"})]}),(0,a.jsx)("div",{className:"text-3xl font-bold text-green-600",children:L.active})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-xl border border-neutral-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-neutral-600 text-sm",children:"متوقفة"}),(0,a.jsx)(d.Z,{className:"w-5 h-5 text-yellow-600"})]}),(0,a.jsx)("div",{className:"text-3xl font-bold text-yellow-600",children:L.paused})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-xl border border-neutral-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-neutral-600 text-sm",children:"مكتملة"}),(0,a.jsx)(u.Z,{className:"w-5 h-5 text-blue-600"})]}),(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:L.completed})]})]}),(0,a.jsx)("div",{className:"bg-white p-4 rounded-xl border border-neutral-200",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)(x.Z,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-neutral-400 w-5 h-5"}),(0,a.jsx)("input",{type:"text",value:v,onChange:e=>w(e.target.value),placeholder:"بحث عن حملة...",className:"w-full pr-12 pl-4 py-2 border border-neutral-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none"})]}),(0,a.jsxs)("select",{value:k,onChange:e=>Z(e.target.value),className:"px-4 py-2 border border-neutral-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none",children:[(0,a.jsx)("option",{value:"all",children:"جميع الحالات"}),(0,a.jsx)("option",{value:"active",children:"نشطة"}),(0,a.jsx)("option",{value:"paused",children:"متوقفة"}),(0,a.jsx)("option",{value:"completed",children:"مكتملة"}),(0,a.jsx)("option",{value:"draft",children:"مسودة"})]}),(0,a.jsxs)("button",{className:"px-4 py-2 bg-neutral-100 text-neutral-700 rounded-lg hover:bg-neutral-200 flex items-center gap-2",children:[(0,a.jsx)(o.Z,{className:"w-5 h-5"}),"المزيد من الفلاتر"]})]})}),0===E.length?(0,a.jsxs)("div",{className:"bg-white rounded-2xl border border-neutral-200 p-16 text-center",children:[(0,a.jsx)(c.Z,{className:"w-16 h-16 text-neutral-300 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-bold text-neutral-900 mb-2",children:"لا توجد حملات حالياً"}),(0,a.jsx)("p",{className:"text-neutral-600 mb-6",children:"ابدأ بإنشاء أول حملة تسويقية لك"}),(0,a.jsx)("button",{onClick:()=>C(!0),className:"px-6 py-3 bg-primary-600 text-white rounded-lg font-semibold btn-transition hover:bg-primary-700",children:"إنشاء حملة الآن"})]}):(0,a.jsx)("div",{className:"bg-white rounded-2xl border border-neutral-200 overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-neutral-50 border-b border-neutral-200",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-right px-6 py-4 text-sm font-semibold text-neutral-700",children:"اسم الحملة"}),(0,a.jsx)("th",{className:"text-right px-6 py-4 text-sm font-semibold text-neutral-700",children:"المنصة"}),(0,a.jsx)("th",{className:"text-right px-6 py-4 text-sm font-semibold text-neutral-700",children:"الحالة"}),(0,a.jsx)("th",{className:"text-right px-6 py-4 text-sm font-semibold text-neutral-700",children:"التاريخ"}),(0,a.jsx)("th",{className:"text-right px-6 py-4 text-sm font-semibold text-neutral-700",children:"الأداء"}),(0,a.jsx)("th",{className:"text-center px-6 py-4 text-sm font-semibold text-neutral-700",children:"الإجراءات"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-neutral-200",children:E.map(e=>{let t=S(e.platform_id);return(0,a.jsxs)("tr",{className:"hover:bg-neutral-50 transition-colors",children:[(0,a.jsxs)("td",{className:"px-6 py-4",children:[(0,a.jsx)("div",{className:"font-semibold text-neutral-900",children:e.name}),(0,a.jsxs)("div",{className:"text-sm text-neutral-600",children:["الميزانية: $",e.budget]})]}),(0,a.jsx)("td",{className:"px-6 py-4",children:t&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"relative w-8 h-8",children:(0,a.jsx)(b.default,{src:t.icon,alt:t.name,fill:!0,className:"object-contain"})}),(0,a.jsx)("span",{className:"text-sm text-neutral-700",children:t.name})]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(z(e.status)),children:D(e.status)})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-neutral-600",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4"}),new Date(e.start_date).toLocaleDateString("ar-EG")]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4 text-neutral-400"}),(0,a.jsx)("span",{className:"text-neutral-900",children:e.views||0}),(0,a.jsx)("span",{className:"text-neutral-500",children:"مشاهدة"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4 text-neutral-400"}),(0,a.jsx)("span",{className:"text-neutral-900",children:e.clicks||0}),(0,a.jsx)("span",{className:"text-neutral-500",children:"نقرة"})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:["active"===e.status||"paused"===e.status?(0,a.jsx)("button",{onClick:()=>q(e.id,e.status),className:"p-2 hover:bg-neutral-100 rounded-lg transition-colors",title:"active"===e.status?"إيقاف مؤقت":"تفعيل",children:"active"===e.status?(0,a.jsx)(d.Z,{className:"w-4 h-4 text-yellow-600"}):(0,a.jsx)(i.Z,{className:"w-4 h-4 text-green-600"})}):null,(0,a.jsx)("button",{className:"p-2 hover:bg-neutral-100 rounded-lg transition-colors",title:"تحرير",children:(0,a.jsx)(f.Z,{className:"w-4 h-4 text-neutral-600"})}),(0,a.jsx)("button",{onClick:()=>A(e.id),className:"p-2 hover:bg-red-50 rounded-lg transition-colors",title:"حذف",children:(0,a.jsx)(j.Z,{className:"w-4 h-4 text-red-600"})})]})})]},e.id)})})]})})}),M&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl max-w-md w-full p-6",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-neutral-900 mb-4",children:"إنشاء حملة جديدة"}),(0,a.jsx)("p",{className:"text-neutral-600 mb-6",children:"سيتم إنشاء حملة جديدة كمسودة يمكنك تعديلها لاحقاً"}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:J,className:"flex-1 px-6 py-3 bg-primary-600 text-white rounded-lg font-semibold btn-transition hover:bg-primary-700",children:"إنشاء"}),(0,a.jsx)("button",{onClick:()=>C(!1),className:"flex-1 px-6 py-3 bg-neutral-100 text-neutral-700 rounded-lg font-semibold hover:bg-neutral-200",children:"إلغاء"})]})]})})]})}},2141:function(e,t,s){"use strict";s.d(t,{O:function(){return a}});let a=(0,s(71545).eI)("https://gigrtzamstdyynmvwljq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZ3J0emFtc3RkeXlubXZ3bGpxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIwMDg5MDMsImV4cCI6MjA3NzU4NDkwM30.OZMTpBkAK2Zc4m0CyOdBbHsoAV_MS7FK-OpQNvuxgmc")},91723:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},42208:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3577:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},89227:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]])},33276:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]])},99397:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},73247:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},15868:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},58896:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},18930:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},70525:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},95805:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(79205).Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},25523:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return a}});let a=s(47043)._(s(2265)).default.createContext(null)}},function(e){e.O(0,[963,145,971,117,744],function(){return e(e.s=84042)}),_N_E=e.O()}]);