(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[663],{32550:function(e,t,r){Promise.resolve().then(r.bind(r,14972))},14972:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w}});var a=r(57437),s=r(2265),n=r(99376),l=r(27648),i=r(33145),c=r(2141),d=r(79205);let o=(0,d.Z)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var u=r(68919),h=r(44743),m=r(58896),x=r(95805),f=r(48736),p=r(98728),y=r(88226),b=r(32489),g=r(92369),k=r(88906);let j=(0,d.Z)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var v=r(58293),N=r(73247);let Z=(0,d.Z)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);function w(e){let{children:t}=e,r=(0,n.useRouter)(),[d,w]=(0,s.useState)(null),[M,I]=(0,s.useState)(null),[C,z]=(0,s.useState)(!1),[O,S]=(0,s.useState)(!1),[_,A]=(0,s.useState)(!0);(0,s.useEffect)(()=>{H()},[]);let H=async()=>{let{data:{user:e}}=await c.O.auth.getUser();if(!e){r.push("/login");return}w(e);let{data:t}=await c.O.from("profiles").select("*").eq("id",e.id).single();if(t){I(t);let r="admin"===t.role;z(r),console.log("Dashboard Layout - User Profile:",{userId:e.id,role:t.role,isAdmin:r,fullName:t.full_name})}else console.log("Dashboard Layout - No profile data found for user:",e.id);A(!1)},J=async()=>{await c.O.auth.signOut(),r.push("/login")},P=[{name:"الرئيسية",href:"/dashboard",icon:o},{name:"المنصات",href:"/dashboard/platforms",icon:u.Z},{name:"تيليجرام",href:"/dashboard/telegram/sessions",icon:h.Z},{name:"الحملات",href:"/dashboard/campaigns",icon:m.Z},{name:"جهات الاتصال",href:"/dashboard/contacts",icon:x.Z},{name:"التقارير",href:"/dashboard/reports",icon:f.Z},{name:"الإعدادات",href:"/dashboard/settings",icon:p.Z},{name:"الفوترة",href:"/dashboard/billing",icon:y.Z}];return _?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-neutral-50",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 border-4 border-primary-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-neutral-600",children:"جاري التحميل..."})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-neutral-50",children:[(0,a.jsxs)("aside",{className:"fixed top-0 right-0 h-full w-72 bg-white border-l border-neutral-200 z-50 transform transition-transform duration-300 ".concat(O?"translate-x-0":"translate-x-full md:translate-x-0"),children:[(0,a.jsxs)("div",{className:"h-16 border-b border-neutral-200 flex items-center justify-between px-6",children:[(0,a.jsxs)(l.default,{href:"/dashboard",className:"flex items-center space-x-2 space-x-reverse",children:[(0,a.jsx)(i.default,{src:"/logo.png",alt:"SocialPro Logo",width:40,height:40,className:"object-contain"}),(0,a.jsx)("span",{className:"text-2xl font-bold text-neutral-900",children:"SocialPro"})]}),(0,a.jsx)("button",{onClick:()=>S(!1),className:"md:hidden p-2 hover:bg-neutral-100 rounded-lg",children:(0,a.jsx)(b.Z,{className:"w-5 h-5"})})]}),(0,a.jsx)("div",{className:"p-6 border-b border-neutral-200",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(g.Z,{className:"w-6 h-6 text-primary-600"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"font-semibold text-neutral-900 truncate",children:(null==M?void 0:M.full_name)||(null==d?void 0:d.email)}),(0,a.jsxs)("div",{className:"text-sm text-neutral-600 flex items-center gap-1",children:[(0,a.jsx)("span",{className:"text-accent-500",children:"★"}),(null==M?void 0:M.points)||100," نقطة"]})]})]})}),(0,a.jsxs)("nav",{className:"p-4 space-y-1",children:[C&&(0,a.jsxs)(l.default,{href:"/admin",className:"flex items-center gap-3 px-4 py-3 text-white bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 rounded-lg transition-all shadow-md hover:shadow-lg group mb-4",onClick:()=>S(!1),children:[(0,a.jsx)(k.Z,{className:"w-5 h-5 group-hover:scale-110 transition-transform"}),(0,a.jsx)("span",{className:"font-bold",children:"لوحة الإدارة"})]}),P.map(e=>{let t=e.icon;return(0,a.jsxs)(l.default,{href:e.href,className:"flex items-center gap-3 px-4 py-3 text-neutral-700 hover:bg-primary-50 hover:text-primary-600 rounded-lg transition-colors group",onClick:()=>S(!1),children:[(0,a.jsx)(t,{className:"w-5 h-5 group-hover:scale-110 transition-transform"}),(0,a.jsx)("span",{className:"font-medium",children:e.name})]},e.name)})]}),(0,a.jsx)("div",{className:"absolute bottom-4 right-4 left-4",children:(0,a.jsxs)("button",{onClick:J,className:"w-full flex items-center gap-3 px-4 py-3 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[(0,a.jsx)(j,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-medium",children:"تسجيل الخروج"})]})})]}),(0,a.jsxs)("div",{className:"md:mr-72",children:[(0,a.jsx)("header",{className:"h-16 bg-white border-b border-neutral-200 sticky top-0 z-40",children:(0,a.jsxs)("div",{className:"h-full px-4 sm:px-6 lg:px-8 flex items-center justify-between",children:[(0,a.jsx)("button",{onClick:()=>S(!0),className:"md:hidden p-2 hover:bg-neutral-100 rounded-lg",children:(0,a.jsx)(v.Z,{className:"w-6 h-6"})}),(0,a.jsx)("div",{className:"flex-1 max-w-2xl mx-4 hidden sm:block",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(N.Z,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-neutral-400 w-5 h-5"}),(0,a.jsx)("input",{type:"text",placeholder:"بحث...",className:"w-full pr-12 pl-4 py-2 border border-neutral-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none"})]})}),(0,a.jsx)("div",{className:"flex items-center gap-3",children:(0,a.jsxs)("button",{className:"relative p-2 hover:bg-neutral-100 rounded-lg",children:[(0,a.jsx)(Z,{className:"w-5 h-5 text-neutral-600"}),(0,a.jsx)("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]})})]})}),(0,a.jsx)("main",{className:"p-4 sm:p-6 lg:p-8",children:t})]}),O&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>S(!1)})]})}},2141:function(e,t,r){"use strict";r.d(t,{O:function(){return a}});let a=(0,r(71545).eI)("https://gigrtzamstdyynmvwljq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZ3J0emFtc3RkeXlubXZ3bGpxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIwMDg5MDMsImV4cCI6MjA3NzU4NDkwM30.OZMTpBkAK2Zc4m0CyOdBbHsoAV_MS7FK-OpQNvuxgmc")},88226:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},48736:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},58293:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]])},73247:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},44743:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},98728:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},68919:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]])},88906:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},58896:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},92369:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},95805:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},32489:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(79205).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},27648:function(e,t,r){"use strict";r.d(t,{default:function(){return s.a}});var a=r(72972),s=r.n(a)},99376:function(e,t,r){"use strict";var a=r(35475);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})}},function(e){e.O(0,[963,972,145,971,117,744],function(){return e(e.s=32550)}),_N_E=e.O()}]);