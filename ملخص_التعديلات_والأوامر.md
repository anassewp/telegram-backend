# âœ… Ù…Ù„Ø®Øµ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª ÙˆØ§Ù„Ø£ÙˆØ§Ù…Ø± - SocialProMax

**ØªØ§Ø±ÙŠØ®:** 2025-11-03

---

## ğŸ“‹ Ù…Ø§ ØªÙ… Ø¥Ù†Ø¬Ø§Ø²Ù‡:

### 1. âœ… ØªØ­Ø¯ÙŠØ« Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
- âœ… `lib/supabase.ts` - Ù…Ø­Ø¯Ø« Ø¨Ø§Ù„ÙØ¹Ù„ Ø¨Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ø§Ù„ØµØ­ÙŠØ­Ø©
- âœ… Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù SQL ÙƒØ§Ù…Ù„ Ù„Ù„Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©

### 2. âœ… Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:
- âœ… `supabase/complete_database_schema.sql` - Ù…Ù„Ù SQL ÙƒØ§Ù…Ù„
- âœ… `Ø£Ù…Ø±_SQL_Ø§Ù„ÙƒØ§Ù…Ù„.md` - Ø¯Ù„ÙŠÙ„ Ø§Ø³ØªØ®Ø¯Ø§Ù… SQL
- âœ… `socialpro-saas/ENV_SETUP.md` - Ø¯Ù„ÙŠÙ„ Ø¥Ø¹Ø¯Ø§Ø¯ Environment Variables

---

## ğŸš€ Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ù…Ù†Ùƒ:

### Ø§Ù„Ø®Ø·ÙˆØ© 1: Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù .env.local

ÙÙŠ Ù…Ø¬Ù„Ø¯ `socialpro-saas/`ØŒ Ø£Ù†Ø´Ø¦ Ù…Ù„Ù `.env.local` ÙˆØ§Ù†Ø³Ø® Ø§Ù„ØªØ§Ù„ÙŠ:

```env
NEXT_PUBLIC_SUPABASE_URL=https://gigrtzamstdyynmvwljq.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZ3J0emFtc3RkeXlubXZ3bGpxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIwMDg5MDMsImV4cCI6MjA3NzU4NDkwM30.OZMTpBkAK2Zc4m0CyOdBbHsoAV_MS7FK-OpQNvuxgmc
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpZ3J0emFtc3RkeXlubXZ3bGpxIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MjAwODkwMywiZXhwIjoyMDc3NTg0OTAzfQ.9wbREihcsQvLX5TS2Q_f6lxYNzBgdWNQS7wsZvYH6lc
NEXT_PUBLIC_TELEGRAM_BACKEND_URL=http://localhost:8000
NEXT_PUBLIC_SITE_URL=http://localhost:3000
```

**ğŸ“ Ø§Ù„Ù…Ø±Ø¬Ø¹:** `socialpro-saas/ENV_SETUP.md`

---

### Ø§Ù„Ø®Ø·ÙˆØ© 2: Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ø¥Ù„Ù‰ Supabase

#### Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø³Ø±ÙŠØ¹Ø©:

1. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰: https://supabase.com/dashboard/project/gigrtzamstdyynmvwljq
2. Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ **SQL Editor**
3. Ø§Ø¶ØºØ· **New Query**
4. Ø§ÙØªØ­ Ù…Ù„Ù: `supabase/complete_database_schema.sql`
5. Ø§Ù†Ø³Ø® Ø§Ù„Ù…Ø­ØªÙˆÙ‰ **ÙƒØ§Ù…Ù„**
6. Ø§Ù„ØµÙ‚Ù‡ ÙÙŠ SQL Editor
7. Ø§Ø¶ØºØ· **Run** (Ø£Ùˆ F5)

#### Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø£ÙˆØ§Ù…Ø± Ø§Ù„ØªØ§Ù„ÙŠØ© Ù…Ø¨Ø§Ø´Ø±Ø©:

```sql
-- ============================================
-- Ø¬Ø¯ÙˆÙ„ telegram_campaign_messages
-- ============================================
CREATE TABLE IF NOT EXISTS public.telegram_campaign_messages (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    campaign_id UUID NOT NULL REFERENCES campaigns(id) ON DELETE CASCADE,
    user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
    session_id UUID NOT NULL REFERENCES telegram_sessions(id) ON DELETE CASCADE,
    group_id BIGINT NOT NULL,
    group_title TEXT,
    message_text TEXT NOT NULL,
    status VARCHAR(50) DEFAULT 'pending' CHECK (status IN ('pending', 'sending', 'sent', 'failed')),
    error_message TEXT,
    sent_at TIMESTAMPTZ,
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- Indexes
CREATE INDEX IF NOT EXISTS idx_telegram_campaign_messages_campaign_id ON telegram_campaign_messages(campaign_id);
CREATE INDEX IF NOT EXISTS idx_telegram_campaign_messages_user_id ON telegram_campaign_messages(user_id);
CREATE INDEX IF NOT EXISTS idx_telegram_campaign_messages_session_id ON telegram_campaign_messages(session_id);
CREATE INDEX IF NOT EXISTS idx_telegram_campaign_messages_status ON telegram_campaign_messages(status);

-- RLS
ALTER TABLE telegram_campaign_messages ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view their own campaign messages"
    ON telegram_campaign_messages FOR SELECT
    USING (auth.uid() = user_id);

CREATE POLICY "Users can insert their own campaign messages"
    ON telegram_campaign_messages FOR INSERT
    WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can update their own campaign messages"
    ON telegram_campaign_messages FOR UPDATE
    USING (auth.uid() = user_id);

CREATE POLICY "Users can delete their own campaign messages"
    ON telegram_campaign_messages FOR DELETE
    USING (auth.uid() = user_id);

-- Trigger
CREATE OR REPLACE FUNCTION update_telegram_campaign_messages_updated_at()
RETURNS TRIGGER AS $$
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER telegram_campaign_messages_updated_at
    BEFORE UPDATE ON telegram_campaign_messages
    FOR EACH ROW
    EXECUTE FUNCTION update_telegram_campaign_messages_updated_at();

-- ============================================
-- Ø¬Ø¯ÙˆÙ„ telegram_members
-- ============================================
CREATE TABLE IF NOT EXISTS public.telegram_members (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE,
    group_id BIGINT NOT NULL,
    telegram_user_id BIGINT NOT NULL,
    username TEXT,
    first_name TEXT,
    last_name TEXT,
    phone TEXT,
    is_bot BOOLEAN DEFAULT false,
    is_premium BOOLEAN DEFAULT false,
    is_verified BOOLEAN DEFAULT false,
    is_scam BOOLEAN DEFAULT false,
    is_fake BOOLEAN DEFAULT false,
    access_hash BIGINT,
    extracted_at TIMESTAMPTZ DEFAULT NOW(),
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW(),
    UNIQUE(user_id, group_id, telegram_user_id)
);

-- Indexes
CREATE INDEX IF NOT EXISTS idx_telegram_members_user_id ON telegram_members(user_id);
CREATE INDEX IF NOT EXISTS idx_telegram_members_group_id ON telegram_members(group_id);
CREATE INDEX IF NOT EXISTS idx_telegram_members_telegram_user_id ON telegram_members(telegram_user_id);
CREATE INDEX IF NOT EXISTS idx_telegram_members_extracted_at ON telegram_members(extracted_at);

-- RLS
ALTER TABLE telegram_members ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view their own telegram members"
    ON telegram_members FOR SELECT
    USING (auth.uid() = user_id);

CREATE POLICY "Users can insert their own telegram members"
    ON telegram_members FOR INSERT
    WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can update their own telegram members"
    ON telegram_members FOR UPDATE
    USING (auth.uid() = user_id);

CREATE POLICY "Users can delete their own telegram members"
    ON telegram_members FOR DELETE
    USING (auth.uid() = user_id);

-- Trigger
CREATE OR REPLACE FUNCTION update_telegram_members_updated_at()
RETURNS TRIGGER AS $$
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER telegram_members_updated_at
    BEFORE UPDATE ON telegram_members
    FOR EACH ROW
    EXECUTE FUNCTION update_telegram_members_updated_at();
```

**ğŸ“ Ø§Ù„Ù…Ø±Ø¬Ø¹:** `supabase/complete_database_schema.sql` (Ù…Ù„Ù ÙƒØ§Ù…Ù„)

---

### Ø§Ù„Ø®Ø·ÙˆØ© 3: ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹

```bash
cd SocialProMax/socialpro-saas
npm install
npm run dev
```

Ø§ÙØªØ­: http://localhost:3000

---

## âœ… Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØ­Ù‚Ù‚:

- [ ] Ù…Ù„Ù `.env.local` ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡
- [ ] Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ `.env.local`
- [ ] Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ØªÙ… Ø¥Ø¶Ø§ÙØªÙ‡Ø§ ÙÙŠ Supabase
- [ ] Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ÙŠØ¹Ù…Ù„ (`npm run dev`)
- [ ] ÙŠÙ…ÙƒÙ† Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ http://localhost:3000

---

## ğŸ“š Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø±Ø¬Ø¹ÙŠØ©:

1. **`supabase/complete_database_schema.sql`** - Ù…Ù„Ù SQL ÙƒØ§Ù…Ù„ (Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„)
2. **`Ø£Ù…Ø±_SQL_Ø§Ù„ÙƒØ§Ù…Ù„.md`** - Ø¯Ù„ÙŠÙ„ Ø§Ø³ØªØ®Ø¯Ø§Ù… SQL
3. **`socialpro-saas/ENV_SETUP.md`** - Ø¯Ù„ÙŠÙ„ Ø¥Ø¹Ø¯Ø§Ø¯ Environment Variables
4. **`Ø¯Ù„ÙŠÙ„_ØªØ´ØºÙŠÙ„_ÙˆØ§Ø®ØªØ¨Ø§Ø±_Ø§Ù„Ù…Ø´Ø±ÙˆØ¹.md`** - Ø¯Ù„ÙŠÙ„ Ø´Ø§Ù…Ù„ Ù„Ù„ØªØ´ØºÙŠÙ„

---

## ğŸ¯ Ø§Ù„Ø®Ù„Ø§ØµØ©:

âœ… **ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©**  
âœ… **ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù SQL ÙƒØ§Ù…Ù„ Ø¬Ø§Ù‡Ø² Ù„Ù„Ù†Ø³Ø® ÙˆØ§Ù„Ù„ØµÙ‚**  
âœ… **ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„ÙØ§Øª Ø§Ù„ØªÙˆØ«ÙŠÙ‚**  

**Ø§Ù„Ø¢Ù† ØªØ­ØªØ§Ø¬ ÙÙ‚Ø·:**
1. Ø¥Ù†Ø´Ø§Ø¡ `.env.local`
2. ØªÙ†ÙÙŠØ° SQL ÙÙŠ Supabase
3. ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹

---

**ØªÙ…!** ğŸ‰

