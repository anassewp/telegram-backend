# ๐ง ุฅุตูุงุญ ุงุณุชูุฑุงุฏ ุงููุฌููุนุงุช - ููุท ุงููุฌููุนุงุช ุงูุชู ุฃุนุถุงุคูุง ุธุงูุฑูู ุจุงููุงูู

**ุงูุชุงุฑูุฎ:** 2025-01-05  
**ุงููุดููุฉ:** ูุงู ุงูููุฏ ูุณุชูุฑุฏ ุฌููุน ุงููุฌููุนุงุช ุญุชู ูู ูุงูุช ุฃุนุถุงุคูุง ูุฎููุฉ (ููุท ููุฅุฏูู)

---

## โ ูุง ุชู ุฅุตูุงุญู

### ุงููุดููุฉ ุงูุณุงุจูุฉ
- ุงูููุฏ ูุงู ูุณุชูุฑุฏ ุฌููุน ุงููุฌููุนุงุช ูู dialogs ุงููุณุชุฎุฏู
- ูู ููู ูุชุญูู ูู ุฅููุงููุฉ ุฑุคูุฉ ุงูุฃุนุถุงุก
- ูุงู ูุณุชูุฑุฏ ุญุชู ุงููุฌููุนุงุช ุงูุชู ุฃุนุถุงุคูุง ูุฎูููู (ููุท ููุฅุฏูู)

### ุงูุญู ุงููุทุจู
ุงูุขู ุงูููุฏ:
1. **ูุชุญูู ูุนููุงู ูู ุฅููุงููุฉ ุฑุคูุฉ ุงูุฃุนุถุงุก** ูุจู ุฅุถุงูุฉ ุงููุฌููุนุฉ
2. **ูุญุงูู ุฌูุจ ูุงุฆูุฉ ุตุบูุฑุฉ ูู ุงูุฃุนุถุงุก** (5 ุฃุนุถุงุก) ููุชุญูู ูู ุงูุตูุงุญูุงุช
3. **ูุชุฎุทู ุงููุฌููุนุงุช ุงูุชู ุฃุนุถุงุคูุง ูุฎูููู** (admin-only)
4. **ูุชุฎุทู ุงููุฌููุนุงุช ุงููููุฏุฉ** (restricted)
5. **ูุญุตู ุนูู ุงูุนุฏุฏ ุงูุญูููู ููุฃุนุถุงุก** ูู GetFullChannelRequest

---

## ๐ ููู ูุนูู ุงูููุฏ ุงูุขู

### 1. ุงูููุชุฑุฉ ุงูุฃูููุฉ
```python
# ุชุฎุทู ุงููููุงุช (channels)
if is_channel:
    continue

# ุชุฎุทู ุงููุฌููุนุงุช ุงููููุฏุฉ
if is_restricted:
    continue
```

### 2. ุงูุชุญูู ุงููุนูู ูู ุฑุคูุฉ ุงูุฃุนุถุงุก
```python
# ูุญุงููุฉ ุฌูุจ ุฃูู 5 ุฃุนุถุงุก ููุชุญูู ูู ุงูุตูุงุญูุงุช
async for user in client.iter_participants(entity, limit=5):
    if not user.bot:
        can_see_members = True
        break
```

### 3. ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- ุฅุฐุง ูุงู ุงูุฎุทุฃ ูุชุนูู ุจุงูุตูุงุญูุงุช โ ุชุฎุทู ุงููุฌููุนุฉ
- ุฅุฐุง ูุงู ุฎุทุฃ ุขุฎุฑ โ ุชุฎุทู ุงููุฌููุนุฉ (ูุฃููุง ูุง ูุณุชุทูุน ุฑุคูุฉ ุงูุฃุนุถุงุก)

### 4. ุฌูุจ ุงูุนุฏุฏ ุงูุญูููู ููุฃุนุถุงุก
```python
full_info = await client(GetFullChannelRequest(entity))
actual_members_count = full_info.full_chat.participants_count
```

---

## ๐ฏ ุงููุชูุฌุฉ

ุงูุขู ุนูุฏ ุงุณุชูุฑุงุฏ ุงููุฌููุนุงุช:
- โ **ููุท ุงููุฌููุนุงุช ุงูุชู ุฃุนุถุงุคูุง ุธุงูุฑูู ุจุงููุงูู** (ููุฌููุนุ ูููุณ ููุท ููุฅุฏูู)
- โ **ุนุฏุฏ ุงูุฃุนุถุงุก ุงูุญูููู** ูู GetFullChannelRequest
- โ **ุฑุณุงุฆู ูุงุถุญุฉ** ูู ุงูู logs ุนู ุงููุฌููุนุงุช ุงููุชุฎุทุงุฉ

---

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุงูุฃุฏุงุก:**
   - ุงูููุฏ ุงูุขู ุฃุจุทุฃ ููููุงู ูุฃูู ูุชุญูู ูู ูู ูุฌููุนุฉ
   - ููู ูุฐุง ุถุฑูุฑู ูุถูุงู ุฌูุฏุฉ ุงูุจูุงูุงุช

2. **ุงููุฌููุนุงุช ุงููุชุฎุทุงุฉ:**
   - ุงููุฌููุนุงุช ุงูุชู ุฃุนุถุงุคูุง ูุฎูููู (admin-only)
   - ุงููุฌููุนุงุช ุงููููุฏุฉ (restricted)
   - ุงููุฌููุนุงุช ุงูุชู ูุง ูุณุชุทูุน ุฑุคูุฉ ุฃุนุถุงุคูุง ูุฃู ุณุจุจ

3. **ุงูุฑุณุงุฆู ูู Logs:**
   - `Skipping group with hidden members (admin only)` - ุงููุฌููุนุฉ ูุฎููุฉ ููุฅุฏูู ููุท
   - `Skipping group with restricted member visibility` - ุตูุงุญูุงุช ูุญุฏูุฏุฉ
   - `Added group with visible members` - ุชูุช ุฅุถุงูุฉ ุงููุฌููุนุฉ ุจูุฌุงุญ

---

## ๐ ุงูุชุญุฏูุซุงุช

### Backend (`telegram-backend/main.py`)
- โ ุฅุถุงูุฉ ุงูุชุญูู ุงููุนูู ูู ุฑุคูุฉ ุงูุฃุนุถุงุก
- โ ุงุณุชุฎุฏุงู `iter_participants` ููุชุญูู ูู ุงูุตูุงุญูุงุช
- โ ุงุณุชุฎุฏุงู `GetFullChannelRequest` ููุญุตูู ุนูู ุงูุนุฏุฏ ุงูุญูููู
- โ ูุนุงูุฌุฉ ุฃูุถู ููุฃุฎุทุงุก

---

**ุขุฎุฑ ุชุญุฏูุซ:** 2025-01-05

